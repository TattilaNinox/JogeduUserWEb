# Kódbázis Méret Audit Jelentés
Dátum: 2026-01-06

A jelen audit célja a `lib` könyvtárban található Dart fájlok méretének vizsgálata a karbantarthatóság szempontjából. A nagy fájlméret gyakran utal a "God Class" anti-pattern jelenlétére, ahol egy osztály túl sok mindent csinál, ami nehezíti a tesztelést, hibajavítást és továbbfejlesztést.

## 1. Kritikus fájlok (>1000 sor) - AZONNALI REFAKTORÁLÁS JAVASOLT
Ezek a fájlok extrém nagyok. Valószínűleg több logikai réteget mosnak össze (pl. UI, üzleti logika, adatkezelés).
Javasolt: Widgetek külön fájlba szervezése, Logika kiszervezése Service/Controller/Provider osztályokba.

1.  **2423 sor**: `lib\screens\memoriapalota_allomas_view_screen.dart` - **Kritikus!** Ez a fájl kiemelkedően nagy. Valószínűleg egy komplex nézet, amelyet kisebb komponensekre kell bontani.
2.  **1718 sor**: `lib\screens\account_screen.dart` - A felhasználói fiók kezelése túl sok funkciót sűrít egy helyre.
3.  **1260 sor**: `lib\screens\user_list_screen.dart` - Valószínűleg tartalmazza a listázást, szűrést, és talán szerkesztési logikát is inline.
4.  **1091 sor**: `lib\screens\note_edit_screen.dart` - A jegyzet szerkesztő komplexitása indokolja a darabolást (pl. toolbar, editor area, settings panel).
5.  **1014 sor**: `lib\screens\note_list_screen.dart` - Hasonlóan a user listhez, a megjelenítés és logika szétválasztása szükséges.
6.  **1014 sor**: `lib\screens\jogeset_view_screen.dart` - Komplex adatmegjelenítés, érdemes al-widgetekre bontani.

## 2. Figyelmeztető kategória (500-1000 sor) - REFAKTORÁLÁS MEGFONTOLANDÓ
Ezek a fájlok még kezelhetők, de a jövőbeli fejlesztések során könnyen átléphetik a kritikus szintet.

7.  **998 sor**: `lib\widgets\shipping_address_form.dart` - Majdnem kritikus. Egy űrlapnak nem szabadna ekkorának lennie. A validáció és UI logika szétválasztása segíthet.
8.  **894 sor**: `lib\widgets\quiz_viewer_dual.dart`
9.  **861 sor**: `lib\screens\collection_study_screen.dart`
10. **849 sor**: `lib\screens\tag_drill_down_screen.dart`
11. **849 sor**: `lib\screens\flashcard_study_screen.dart`
12. **845 sor**: `lib\widgets\note_table.dart`
13. **843 sor**: `lib\screens\bundle_edit_screen.dart`
14. **822 sor**: `lib\screens\note_read_screen.dart`
15. **813 sor**: `lib\widgets\shipping_address_dialog.dart`
16. **765 sor**: `lib\screens\note_create_screen.dart`
17. **762 sor**: `lib\screens\user_bundle_edit_screen.dart`
18. **743 sor**: `lib\widgets\note_card_grid.dart`
19. **742 sor**: `lib\screens\user_bundle_view_screen.dart`
20. **695 sor**: `lib\screens\interactive_note_create_screen.dart`
21. **694 sor**: `lib\screens\login_screen.dart`
22. **682 sor**: `lib\screens\document_selection_screen.dart`
23. **622 sor**: `lib\services\metadata_service.dart` - Service osztályoknál ekkora méret elfogadhatóbb, ha sok a boilerplate, de érdemes lehet funkció szerint darabolni.
24. **604 sor**: `lib\widgets\subscription_renewal_button.dart` - Egy gomb widgetnek ez irreálisan sok. Valószínűleg üzleti logikát tartalmaz, amit ki kellene emelni.
25. **600 sor**: `lib\screens\two_factor_auth_screen.dart`
...és további fájlok 500-600 sor között.

## 3. Akcióterv Javaslatok

### Rövid távú teendők (Quick Wins):
- **`shipping_address_form.dart` (998 sor) és `shipping_address_dialog.dart` (813 sor)**: Ezek nagyon hasonlónak tűnnek. Közös komponensek kiemelésével valószínűleg jelentősen csökkenthető a kódismétlés.
- **`subscription_renewal_button.dart` (604 sor)**: Vizsgáljuk meg, miért ilyen nagy. Ha dialógust vagy komplex logikát tartalmaz, azt szervezzük ki.

### Hosszú távú teendők (Deep Refactoring):
- **`memoriapalota_allomas_view_screen.dart` (2423 sor)**: Ezt a fájlt mindenképpen prioritásként kell kezelni. Darabokra szedni: Header, Content List, Footer, Dialogok külön fájlokba.
- **`account_screen.dart` (1718 sor)**: Szétbontani tabokra vagy szekciókra (pl. ProfileDetails, SubscriptionSettings, SecuritySettings), és ezeket külön widget fájlokba szervezni.

Ez az audit pillanatképet ad a jelenlegi állapotról. A nagy fájlok nem feltétlenül jelentik azt, hogy a kód rossz, de erős indikátorai a technikai adósságnak.
